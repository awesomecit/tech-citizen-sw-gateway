{
  "$schema": "./features.schema.json",
  "version": "1.0.0",
  "lastUpdated": "2025-12-10T14:33:10.018Z",
  "project": {
    "name": "tech-citizen-sw-gateway",
    "repository": "github.com/awesomecit/tech-citizen-sw-gateway"
  },
  "release": {
    "current": "1.0.0",
    "nextSuggested": "1.1.0",
    "lastCommit": "17d1f28",
    "unreleased": {
      "feat": 20,
      "fix": 6,
      "breaking": 0
    }
  },
  "features": {
    "auth-package": {
      "id": "EPIC-009",
      "name": "Reusable Auth Package",
      "description": "Modular authentication package for mono-repo services",
      "status": "in-progress",
      "enabled": true,
      "maturity": "alpha",
      "progress": {
        "percentage": 47,
        "userStories": {
          "total": 6,
          "completed": 3,
          "inProgress": 0,
          "todo": 3
        }
      },
      "environment": {
        "development": true,
        "test": true,
        "staging": false,
        "production": false
      },
      "dependencies": [],
      "blockers": [],
      "commits": [
        {
          "hash": "ab73b71",
          "type": "feat",
          "scope": "auth",
          "subject": "add US-037 package structure with TDD",
          "timestamp": "2025-12-09T14:00:00Z",
          "userStory": "US-037"
        },
        {
          "hash": "f4e80d5",
          "type": "feat",
          "scope": "auth",
          "subject": "add US-038 Scenario 1 - JWT valid token validation",
          "timestamp": "2025-12-09T17:18:00Z",
          "userStory": "US-038"
        },
        {
          "hash": "ecb791e",
          "type": "feat",
          "scope": "auth",
          "subject": "add US-038 Scenarios 2-5 - JWT error validation",
          "timestamp": "2025-12-09T20:45:00Z",
          "userStory": "US-038"
        },
        {
          "hash": "cfa3c6a",
          "type": "feat",
          "scope": "auth",
          "subject": "add US-038 Scenarios 6-7 - issuer and claims validation",
          "timestamp": "2025-12-09T21:15:00Z",
          "userStory": "US-038"
        },
        {
          "hash": "fbd701f",
          "type": "feat",
          "scope": "project",
          "subject": "add EPIC-009 auth package with BDD scenarios",
          "timestamp": "2025-12-09T13:53:43.000Z",
          "userStory": null
        },
        {
          "hash": "169680d",
          "type": "feat",
          "scope": "auth",
          "subject": "implement Keycloak OIDC integration (US-039)",
          "timestamp": "2025-12-09T22:36:39.000Z",
          "userStory": "US-039"
        },
        {
          "hash": "12a4095",
          "type": "test",
          "scope": "auth",
          "subject": "add Keycloak integration tests with real instance (US-039.1)",
          "timestamp": "2025-12-09T22:51:39.000Z",
          "userStory": "US-039"
        },
        {
          "hash": "8e9578f",
          "type": "feat",
          "scope": "auth",
          "subject": "integrate Keycloak OIDC with gateway and E2E tests",
          "timestamp": "2025-12-09T23:27:42.000Z",
          "userStory": null
        },
        {
          "hash": "2c88430",
          "type": "feat",
          "scope": "auth",
          "subject": "implement US-040 enhanced session management",
          "timestamp": "2025-12-10T13:36:40.000Z",
          "userStory": "US-040"
        }
      ],
      "userStories": {
        "US-037": {
          "name": "Auth package structure",
          "status": "done",
          "estimate": "1h",
          "actual": "1h",
          "coverage": 100,
          "tests": {
            "total": 7,
            "passing": 7,
            "failing": 0
          },
          "completedAt": "2025-12-09T14:00:00Z",
          "commits": ["ab73b71", "333b490"]
        },
        "US-038": {
          "name": "JWT validation plugin",
          "status": "done",
          "estimate": "3h",
          "actual": "3h",
          "coverage": 100,
          "tests": {
            "total": 7,
            "passing": 7,
            "failing": 0
          },
          "scenarios": {
            "total": 7,
            "implemented": 7,
            "passing": 7
          },
          "bddFeature": "e2e/features/auth-jwt-validation.feature",
          "completedAt": "2025-12-09T21:15:00Z",
          "commits": ["f4e80d5", "ecb791e", "cfa3c6a"]
        },
        "US-039": {
          "name": "Keycloak integration plugin",
          "status": "in-progress",
          "estimate": "4h",
          "bddFeature": "e2e/features/auth-keycloak-integration.feature",
          "commits": ["169680d", "12a4095"]
        },
        "US-040": {
          "name": "Session management plugin",
          "status": "in-progress",
          "estimate": "3h",
          "bddFeature": "e2e/features/auth-session-management.feature",
          "commits": ["2c88430", "9e9bfa4"]
        },
        "US-041": {
          "name": "TypeBox schemas",
          "status": "todo",
          "estimate": "2h",
          "bddFeature": "e2e/features/auth-schema-validation.feature"
        },
        "US-042": {
          "name": "Main auth plugin composition",
          "status": "todo",
          "estimate": "2h",
          "bddFeature": "e2e/features/auth-plugin-registration.feature"
        }
      },
      "metrics": {
        "estimatedHours": 15,
        "actualHours": 4,
        "remainingHours": 11,
        "velocity": 1,
        "testCoverage": 100,
        "totalTests": 14,
        "passingTests": 14
      },
      "releaseTarget": "1.1.0",
      "releaseNotes": "Foundation for centralized authentication - JWT validation complete"
    },
    "infrastructure-foundation": {
      "id": "EPIC-001",
      "name": "Infrastructure Foundation",
      "description": "Minimal production-ready infrastructure with Docker Compose, monitoring, and graceful shutdown",
      "status": "in-progress",
      "enabled": true,
      "maturity": "beta",
      "progress": {
        "percentage": 60,
        "userStories": {
          "total": 7,
          "completed": 5,
          "inProgress": 0,
          "todo": 2
        }
      },
      "environment": {
        "development": true,
        "test": true,
        "staging": true,
        "production": false
      },
      "dependencies": [],
      "blockers": [],
      "metrics": {
        "estimatedHours": 13,
        "actualHours": 10,
        "remainingHours": 3
      },
      "releaseTarget": "1.0.0",
      "releaseNotes": "Core infrastructure setup with monitoring and graceful shutdown",
      "commits": [
        {
          "hash": "696ddc4",
          "type": "feat",
          "scope": "infra",
          "subject": "add multi-environment Ansible automation with security hardening",
          "timestamp": "2025-12-09T13:10:59.000Z",
          "userStory": null
        },
        {
          "hash": "ee1e161",
          "type": "feat",
          "scope": "infra",
          "subject": "add multi-environment support with dedicated env files",
          "timestamp": "2025-12-08T13:21:53.000Z",
          "userStory": null
        },
        {
          "hash": "294bf4a",
          "type": "feat",
          "scope": "infra",
          "subject": "add minimal infrastructure with YAGNI",
          "timestamp": "2025-12-08T12:37:54.000Z",
          "userStory": null
        },
        {
          "hash": "319d552",
          "type": "feat",
          "scope": "infra",
          "subject": "add demo users auto-provisioning for staging",
          "timestamp": "2025-12-10T00:45:48.000Z",
          "userStory": null
        },
        {
          "hash": "d3fdbf8",
          "type": "test",
          "scope": "infra",
          "subject": "add smoke tests for demo users provisioning",
          "timestamp": "2025-12-10T00:54:41.000Z",
          "userStory": null
        },
        {
          "hash": "b7d12bf",
          "type": "feat",
          "scope": "infra",
          "subject": "add admin-automation client for Keycloak admin operations",
          "timestamp": "2025-12-10T12:38:09.000Z",
          "userStory": null
        }
      ]
    },
    "production-deployment": {
      "id": "EPIC-008",
      "name": "Production Server Setup",
      "description": "Ansible-based production deployment with security hardening",
      "status": "blocked",
      "enabled": false,
      "maturity": "experimental",
      "progress": {
        "percentage": 0,
        "userStories": {
          "total": 6,
          "completed": 0,
          "inProgress": 0,
          "todo": 6
        }
      },
      "environment": {
        "development": false,
        "test": false,
        "staging": false,
        "production": false
      },
      "dependencies": [],
      "blockers": [
        "Awaiting Hetzner server credentials",
        "Cloudflare Zone ID required"
      ],
      "commits": [
        {
          "hash": "696ddc4",
          "type": "feat",
          "scope": "infra",
          "subject": "add multi-environment Ansible automation with security hardening",
          "timestamp": "2025-12-07T10:00:00Z",
          "userStory": "US-032"
        },
        {
          "hash": "1e5f703",
          "type": "feat",
          "scope": "project",
          "subject": "add EPIC-008 Production Deployment to backlog and roadmap",
          "timestamp": "2025-12-09T13:41:01.000Z",
          "userStory": null
        },
        {
          "hash": "ee1e161",
          "type": "feat",
          "scope": "infra",
          "subject": "add multi-environment support with dedicated env files",
          "timestamp": "2025-12-08T13:21:53.000Z",
          "userStory": null
        },
        {
          "hash": "294bf4a",
          "type": "feat",
          "scope": "infra",
          "subject": "add minimal infrastructure with YAGNI",
          "timestamp": "2025-12-08T12:37:54.000Z",
          "userStory": null
        },
        {
          "hash": "319d552",
          "type": "feat",
          "scope": "infra",
          "subject": "add demo users auto-provisioning for staging",
          "timestamp": "2025-12-10T00:45:48.000Z",
          "userStory": null
        },
        {
          "hash": "d3fdbf8",
          "type": "test",
          "scope": "infra",
          "subject": "add smoke tests for demo users provisioning",
          "timestamp": "2025-12-10T00:54:41.000Z",
          "userStory": null
        },
        {
          "hash": "b7d12bf",
          "type": "feat",
          "scope": "infra",
          "subject": "add admin-automation client for Keycloak admin operations",
          "timestamp": "2025-12-10T12:38:09.000Z",
          "userStory": null
        }
      ],
      "metrics": {
        "estimatedHours": 18,
        "actualHours": 0,
        "remainingHours": 18
      },
      "releaseTarget": "1.2.0",
      "releaseNotes": "Production deployment automation ready"
    },
    "centralized-auth": {
      "id": "EPIC-005",
      "name": "Centralized Authentication",
      "description": "Keycloak-based authentication with auth microservice",
      "status": "blocked",
      "enabled": false,
      "maturity": "experimental",
      "progress": {
        "percentage": 0,
        "userStories": {
          "total": 7,
          "completed": 0,
          "inProgress": 0,
          "todo": 7
        }
      },
      "environment": {
        "development": false,
        "test": false,
        "staging": false,
        "production": false
      },
      "dependencies": ["auth-package"],
      "blockers": ["EPIC-009 must complete first (auth package foundation)"],
      "metrics": {
        "estimatedHours": 15,
        "actualHours": 0,
        "remainingHours": 15
      },
      "releaseTarget": "1.3.0",
      "releaseNotes": "Full authentication service with Keycloak integration",
      "commits": [
        {
          "hash": "cfa3c6a",
          "type": "feat",
          "scope": "auth",
          "subject": "add US-038 Scenarios 6-7 - issuer and claims validation",
          "timestamp": "2025-12-09T21:39:21.000Z",
          "userStory": "US-038"
        },
        {
          "hash": "ecb791e",
          "type": "feat",
          "scope": "auth",
          "subject": "add US-038 Scenarios 2-5 - JWT error validation",
          "timestamp": "2025-12-09T21:26:08.000Z",
          "userStory": "US-038"
        },
        {
          "hash": "f4e80d5",
          "type": "feat",
          "scope": "auth",
          "subject": "add US-038 Scenario 1 - JWT valid token validation",
          "timestamp": "2025-12-09T21:19:27.000Z",
          "userStory": "US-038"
        },
        {
          "hash": "ab73b71",
          "type": "feat",
          "scope": "auth",
          "subject": "add US-037 package structure with TDD",
          "timestamp": "2025-12-09T14:51:27.000Z",
          "userStory": "US-037"
        },
        {
          "hash": "1f7097f",
          "type": "refactor",
          "scope": "project",
          "subject": "replace EPIC-005 with Keycloak authentication system",
          "timestamp": "2025-12-09T13:44:08.000Z",
          "userStory": null
        },
        {
          "hash": "169680d",
          "type": "feat",
          "scope": "auth",
          "subject": "implement Keycloak OIDC integration (US-039)",
          "timestamp": "2025-12-09T22:36:39.000Z",
          "userStory": "US-039"
        },
        {
          "hash": "12a4095",
          "type": "test",
          "scope": "auth",
          "subject": "add Keycloak integration tests with real instance (US-039.1)",
          "timestamp": "2025-12-09T22:51:39.000Z",
          "userStory": "US-039"
        },
        {
          "hash": "8e9578f",
          "type": "feat",
          "scope": "auth",
          "subject": "integrate Keycloak OIDC with gateway and E2E tests",
          "timestamp": "2025-12-09T23:27:42.000Z",
          "userStory": null
        },
        {
          "hash": "2c88430",
          "type": "feat",
          "scope": "auth",
          "subject": "implement US-040 enhanced session management",
          "timestamp": "2025-12-10T13:36:40.000Z",
          "userStory": "US-040"
        }
      ]
    }
  },
  "toggles": {
    "auth.jwt.validation": {
      "enabled": true,
      "description": "JWT token validation with @fastify/jwt",
      "environments": {
        "development": true,
        "test": true,
        "staging": false,
        "production": false
      },
      "rolloutPercentage": 100,
      "feature": "auth-package",
      "since": "1.0.0",
      "validations": {
        "signature": true,
        "expiration": true,
        "issuer": true,
        "requiredClaims": ["sub"]
      }
    },
    "auth.jwt.issuerValidation": {
      "enabled": true,
      "description": "Validate JWT issuer matches Keycloak realm",
      "environments": {
        "development": true,
        "test": true,
        "staging": false,
        "production": false
      },
      "rolloutPercentage": 100,
      "feature": "auth-package",
      "since": "1.0.0",
      "config": {
        "allowedIss": "${KEYCLOAK_URL}/realms/${KEYCLOAK_REALM}"
      }
    },
    "infra.gracefulShutdown": {
      "enabled": true,
      "description": "Graceful shutdown on SIGTERM/SIGINT",
      "environments": {
        "development": true,
        "test": true,
        "staging": true,
        "production": false
      },
      "rolloutPercentage": 100,
      "feature": "infrastructure-foundation",
      "since": "1.0.0",
      "config": {
        "timeout": 30000
      }
    },
    "monitoring.prometheus": {
      "enabled": true,
      "description": "Prometheus metrics collection",
      "environments": {
        "development": true,
        "test": true,
        "staging": true,
        "production": false
      },
      "rolloutPercentage": 100,
      "feature": "infrastructure-foundation",
      "since": "1.0.0",
      "endpoints": ["/metrics"]
    }
  },
  "changelog": {
    "1.0.0": {
      "released": false,
      "targetDate": "2025-12-15",
      "features": [
        "EPIC-001: Infrastructure Foundation (60% complete)",
        "EPIC-009: Auth Package - JWT validation (US-037, US-038)"
      ],
      "fixes": [],
      "breaking": [],
      "commits": {
        "feat": 4,
        "fix": 0,
        "docs": 1,
        "refactor": 2
      },
      "highlights": [
        "JWT validation plugin with 100% test coverage",
        "7 BDD scenarios implemented (auth-jwt-validation.feature)",
        "Docker Compose infrastructure with Prometheus + Grafana",
        "Graceful shutdown handling"
      ]
    }
  }
}
