{
  "name": "api-gateway-suite",
  "version": "1.4.0",
  "description": "API Gateway centralizzato per suite software healthcare",
  "private": true,
  "type": "module",
  "workspaces": [
    "packages/*",
    "services/*"
  ],
  "engines": {
    "node": ">=22.0.0"
  },
  "scripts": {
    "// ==== Development ====": "",
    "dev": "wattpm dev",
    "start": "wattpm start",
    "build": "wattpm build",
    "// ==== Code Quality ====": "",
    "lint": "eslint \"{services,packages}/**/*.ts\" --fix",
    "lint:check": "eslint \"{services,packages}/**/*.ts\"",
    "format": "prettier --write \"services/**/*.ts\" \"test/**/*.ts\" \"scripts/**/*.{js,cjs}\" \"*.{json,md}\" || prettier --write \"packages/**/*.ts\" 2>/dev/null || true",
    "format:check": "prettier --check \"services/**/*.ts\" \"test/**/*.ts\" \"scripts/**/*.{js,cjs}\" \"*.{json,md}\"",
    "quality": "npm run format:check && npm run lint:check",
    "quality:fix": "npm run format && npm run lint",
    "analyze": "node scripts/analyze-complexity.cjs --type=all",
    "analyze:cognitive": "node scripts/analyze-complexity.cjs --type=cognitive",
    "analyze:json": "node scripts/analyze-complexity.cjs --type=all --json",
    "// ==== Testing ====": "",
    "test": "jest",
    "test:watch": "jest --watch",
    "test:cov": "jest --coverage",
    "test:coverage:check": "npm run test:all",
    "test:all": "bash scripts/test-with-keycloak.sh",
    "test:cleanup": "bash scripts/test-cleanup.sh",
    "test:integration": "NODE_ENV=test jest --config ./jest.integration.config.cjs",
    "test:integration:safe": "bash scripts/test-env-guard.sh integration",
    "test:e2e": "jest --config ./jest.e2e.config.cjs",
    "test:e2e:safe": "bash scripts/test-env-guard.sh e2e",
    "verify": "npm run format:check && npm run lint:check && npm run test && npm run build",
    "verify:full": "npm run verify && npm run test:cov",
    "// ==== Infrastructure ====": "",
    "infra:start": "bash scripts/infra-start.sh development",
    "infra:start:test": "bash scripts/infra-start.sh test",
    "infra:stop": "bash scripts/infra-stop.sh development",
    "infra:stop:test": "bash scripts/infra-stop.sh test",
    "infra:clean": "bash scripts/infra-stop.sh development volumes",
    "// ==== Deployment ====": "",
    "staging:deploy": "bash scripts/deploy-staging.sh",
    "staging:start": "docker compose -f docker-compose.yml -f docker-compose.staging.yml up -d",
    "staging:stop": "docker compose -f docker-compose.yml -f docker-compose.staging.yml down",
    "staging:logs": "docker compose -f docker-compose.yml -f docker-compose.staging.yml logs -f",
    "// ==== Ansible ====": "",
    "ansible": "bash scripts/ansible.sh",
    "ansible:ping": "bash scripts/ansible.sh staging ping && bash scripts/ansible.sh production ping",
    "ansible:staging:security": "bash scripts/ansible.sh staging security",
    "ansible:staging:audit": "bash scripts/ansible.sh staging audit",
    "ansible:staging:discovery": "bash scripts/ansible.sh staging discover",
    "ansible:staging:cleanup": "bash scripts/ansible.sh staging cleanup",
    "ansible:staging:deploy": "bash scripts/ansible.sh staging deploy",
    "ansible:prod:discovery": "bash scripts/ansible.sh production discover",
    "ansible:prod:security": "bash scripts/ansible.sh production security",
    "ansible:prod:audit": "bash scripts/ansible.sh production audit",
    "ansible:prod:deploy": "bash scripts/ansible.sh production deploy",
    "// ==== Security ====": "",
    "security:check": "node scripts/check-secrets.cjs",
    "security:scan": "npm audit --audit-level=moderate",
    "// ==== Release ====": "",
    "release": "node scripts/auto-release.cjs --type=\"auto\"",
    "release:suggest": "node scripts/auto-release.cjs --type=\"auto\" --dry-run",
    "release:minor": "node scripts/auto-release.cjs --type=\"minor\"",
    "release:major": "node scripts/auto-release.cjs --type=\"major\"",
    "release:notes": "bash scripts/generate-release-notes.sh",
    "features:update": "node scripts/update-features.js",
    "features:preview": "node scripts/update-features.js --dry-run",
    "features:validate": "npx ajv-cli validate -s features.schema.json -d features.json --strict=false -c ajv-formats",
    "// ==== Utilities ====": "",
    "keys:generate": "node scripts/generate-keys.js",
    "keys:rsa": "node scripts/generate-keys.js --type=rsa --env=development",
    "keys:rsa:prod": "node scripts/generate-keys.js --type=rsa --env=production --bits=4096",
    "keys:jwt": "node scripts/generate-keys.js --type=jwt-secret",
    "keys:api": "node scripts/generate-keys.js --type=api-key",
    "keys:session": "node scripts/generate-keys.js --type=session-secret",
    "keys:keycloak": "node scripts/generate-keys.js --type=keycloak-secret",
    "keys:all": "node scripts/generate-keys.js --all --env=development",
    "keys:all:prod": "node scripts/generate-keys.js --all --env=production",
    "// ==== Git Hooks ====": "",
    "prepare": "husky",
    "pre-commit": "lint-staged"
  },
  "lint-staged": {
    "*.{ts,js}": [
      "eslint --fix",
      "prettier --write"
    ],
    "*.{json,md,yml}": [
      "prettier --write"
    ]
  },
  "devDependencies": {
    "@commitlint/cli": "^19.8.1",
    "@commitlint/config-conventional": "^19.8.1",
    "@eslint/js": "^9.39.1",
    "@types/jest": "^29.5.14",
    "@types/node": "^22.19.1",
    "ajv-formats": "^3.0.1",
    "dotenv": "^16.4.7",
    "eslint": "^8.57.1",
    "eslint-config-prettier": "^10.1.8",
    "eslint-plugin-prettier": "^5.5.4",
    "eslint-plugin-sonarjs": "^0.25.1",
    "globals": "^15.15.0",
    "husky": "^9.1.7",
    "jest": "^29.7.0",
    "lint-staged": "^16.2.7",
    "prettier": "^3.7.4",
    "ts-jest": "^29.4.6",
    "typescript": "^5.7.0",
    "typescript-eslint": "^8.48.1",
    "wattpm": "^3.0.0",
    "yaml": "^2.8.2"
  }
}
