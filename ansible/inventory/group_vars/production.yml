---
# Production Environment Variables
# Loaded automatically when targeting production hosts

environment: production
deployment_target: production

# Domain Configuration (overridable via secrets)
domain: "{{ lookup('env', 'DOMAIN') | default('tech-citizen.me', true) }}"

# Subdomains
gateway_domain: 'gateway.{{ domain }}'
auth_domain: 'auth.{{ domain }}'
grafana_domain: 'grafana.{{ domain }}'
app_domain: 'app.{{ domain }}'
www_domain: 'www.{{ domain }}'

# Service Ports
gateway_port: 3042
keycloak_port: 8090
grafana_port: 3001
prometheus_port: 19090
caddy_http_port: 18080
caddy_https_port: 18443
caddy_admin_port: 12019

# SSL/TLS Configuration
ssl_email: "{{ lookup('env', 'SSL_EMAIL') | default('admin@' + domain, true) }}"
ssl_staging: false # Use production Let's Encrypt

# Deployment Paths
deployment_root: /opt/gateway
docker_compose_file: '{{ deployment_root }}/docker-compose.yml'
env_file: '{{ deployment_root }}/.env'
infrastructure_dir: '{{ deployment_root }}/infrastructure'

# Cloudflare (loaded from secrets if available)
cloudflare_zone_id: "{{ lookup('env', 'CLOUDFLARE_ZONE_ID') | default('', true) }}"
cloudflare_api_token: "{{ lookup('env', 'CLOUDFLARE_API_TOKEN') | default('', true) }}"

# Monitoring
enable_monitoring: true
enable_loki: false # Enable when needed
enable_tempo: false # Enable when needed

# Backup Configuration
backup_enabled: true
backup_retention_days: 30
